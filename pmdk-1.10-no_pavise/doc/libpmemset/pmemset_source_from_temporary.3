.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "" "" "2022-08-10" "PMDK - " "PMDK Programmer's Manual"
.hy
.\" SPDX-License-Identifier: BSD-3-Clause
.\" Copyright 2021, Intel Corporation
.SH NAME
.PP
\f[B]pmemset_source_from_temporary\f[]() \- creates an instance of
persistent memory data source
.SH SYNOPSIS
.IP
.nf
\f[C]
#include\ <libpmemset.h>

int\ pmemset_source_from_temporary(struct\ pmemset_source\ **src,\ const\ char\ const\ char\ *dir);
\f[]
.fi
.SH DESCRIPTION
.PP
\f[B]pmemset_source_from_temporary\f[]() function instantiates a new
*struct pmemset_source\f[B] object describing the data source and
creates a unnamed temporary file in the provided directory \f[I]dir\f[].
The temporary file is always created with mode 0600, and the
\f[I]dir\f[] must specify an existing directory name. The created file
has size 0 and is extended dynamically based on required map size during
\f[]pmemset_map**(3).
.PP
In case of source from temporary file the
\f[B]pmemset_source_delete\f[](3) function frees \f[I]*src\f[] and sets
\f[I]*src\f[] to NULL and closes the temporary file as a result the file
is immediately deleted.
.SH RETURN VALUE
.PP
The \f[B]pmemset_source_from_temporary\f[]() function return 0 on
success or negative error code on failure.
.SH ERRORS
.PP
The \f[B]pmemset_source_from_temporary\f[]() can fail with the following
errors:
.IP \[bu] 2
\f[B]PMEMSET_E_INVALID_SOURCE_PATH\f[] \- the provided directory path
string is NULL or provided path does not exists.
.IP \[bu] 2
\f[B]PMEMSET_E_CANNOT_CREATE_TEMP_FILE\f[] \- cannot create a unique
temporary filename.
.IP \[bu] 2
\f[B]\-ENOMEM\f[] \- in case of insufficient memory to allocate an
instance of \f[I]struct pmemset_source\f[].
.SH SEE ALSO
.PP
\f[B]pmemset_map\f[](3), \f[B]pmemset_source_delete\f[](3),
\f[B]libpmemset\f[](7) and \f[B]<http://pmem.io>\f[]
